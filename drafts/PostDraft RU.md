# DSL KeyPad — многоязычный ввод и ввод более 4 700 символов Юникода на базовых QWERTY/ЙЦУКЕН

**Содержание**
 • [Краткий экскурс](#Краткий-экскурс)
 • [Краткий перечень возможностей](#Краткий-перечень-возможностей)
 • [Подробнее об основных возможностях](#Подробнее-об-основных-возможностях)
  ⁃ [Многослойные привязки](#Многослойные-привязки)
  ⁃ [Режим композиции](#Режим-композиции)
  ⁃ [Альтернативный ввод](#Альтернативный-ввод)
  ⁃ [Вариации глифов](#Вариации-глифов)
  ⁃ [TELEX/VNI-подобный ввод](#TELEXVNI-подобный-ввод)
  ⁃ [Поиск](#Поиск)
  ⁃ [Внутренние раскладки клавиатуры](#Внутренние-раскладки-клавиатуры)
  ⁃ [Модификации](#Модификации)
 • [Окно настройек](#Окно-настроек)
 • [Менее значимые/вспомогательные возможности](#Менее-значимые-вспомогательные-возможности)
 • [Установка и репозиторий](#Установка-и-репозиторий)
 • [Ограничения и нюансы](#Ограничения-и-нюансы)

Представленная программка — инструмент, дающий пользователю возможность вводить широкий спектр символов посредством ряда методов, описанных ниже. Основной фокус — расширение охвата латиницы и кириллицы без необходимости наличия в системе отдельных языковых раскладок, помимо английской и русской, расширение общего охвата символов без необходимости лезть в карты символов или запоминать альт-коды.

_Написана на AutoHotkey v2_

![GUI с представлением списка доступных символов с их хоткеями или «рецептами» (см. далее)](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/panel_forge_tab_ru.png)

<anchor>Краткий-экскурс</anchor>

## Краткий экскурс

Инструмент родился из собственной нужды к использованию «нестандартных» символов. Сначала я пользовалась «[Типографской раскладкой](https://ilyabirman.ru/typography-layout/)» Ильи Бирмана (и пользуюсь по сей день в паре со своим инструментом), однако этого мне оказалось мало — она не давала мне всего необходимого.

Я искала и пробовала другие решения — например, [WinCompose](https://github.com/samhocevar/wincompose), — но по итогу это привело меня к мысли «всё не совсем то». К тому моменту я уже занималась написанием своего скрипта, тогда ещё совсем простого. Я решила продолжить его развивать, ведь никто не сделает инструмент наиболее удобный для меня, чем я сама.

Первая версия была до банальности примитивной, ~20 биндов формата обычных привязок:

```ahk
<^<!m:: Send("{U+0304}") ; Combining macron
<^<!b:: Send("{U+0306}") ; Combining breve
…
<^>!>+1:: Send("{U+2003}") ; Em Space
<^>!>+2:: Send("{U+2002}") ; En Space
…
<^<!e::　Send("{U+045E}") ; (Ў)
…
```

Однако со временем мою голову начали посещать всё новые идеи и желание хотя бы попробовать их реализовать. Желание сделать что-то сложнее, разнообразнее, и что могло бы охватить все мои потенциальные символьные хотелки. Как итог — процесс, конечно, сильно затянулся, да получился какой-то монструозный ООП’оид, но результатом я относительно довольна (есть что улучшать, и я буду это улучшать по мере возможности).

Думаю тут же следует упомянуть, что я, конечно, не программист — максимум кодер. В начале разработки так вообще была утёнком тем ещё и бегала частенько к нейронке (с которой контакт заладился плохо — не умел гпт с автохоткеем нормально помочь… и хорошо — лишний пинок самой думать над кодом).

<anchor>Краткий-перечень-возможностей</anchor>

## Краткий перечень возможностей

[↓ к подробным описаниям](#Подробнее-об-основных-возможностях)

- Как описано в заголовке — поддержка более 4 700 символов Юникода, включая: пунктуацию, математические символы, символы валют, специальные символы, алхимические и т.д.
- «Многослойный» набор привязок, в основном — раздельных для английского и русского языков (\[англ.\] `RAlt + A` → &Abreve;, `RAlt + Z` → &Zdot;; \[рус.\] `RAlt + Ф` → &#1138;, `RAlt + Я` → &#1126;).
  Включает поддержку пользовательских привязок в JSON‐формате.
- Режим композиции — активируется двойным нажатием `RAlt` и позволяет получать одни символы из последовательности других («рецепта») (AE → &AElig;; OE → &OElig;; A&#9676;&#774;&#9676;&#769; → &#7854;; &Iukcy;&#1130; → &#1132;; ДЧ → &#1324;; ΣΤ → Ϛ, αͺ → ᾳ).
  Включает поддержку пользовательских рецептов в INI/JSON/XCompose форматах.
- Альтернативные режимы ввода для форм письменности, отличных от латиницы и кириллицы ([греческая письменность](https://ru.wikipedia.org/wiki/Греческий_алфавит), [руническая](https://ru.wikipedia.org/wiki/Руны), [глаголица](https://ru.wikipedia.org/wiki/Глаголица), [финикийская](https://ru.wikipedia.org/wiki/Финикийское_письмо), [этрусская](https://en.wikipedia.org/wiki/Old_Italic_scripts), [тюркская](https://ru.wikipedia.org/wiki/Древнетюркское_письмо), [пермская](https://ru.wikipedia.org/wiki/Древнепермское_письмо) и пр. виды письменности; включает и [Международный фонетический алфавит](https://ru.wikipedia.org/wiki/Международный_фонетический_алфавит)).
- Вариации глифов — режимы, позволяющие вводить альтернативные варианты символов (A → &#7468; &#119860; &#119808; &#119912; &#120224; &#120328; &#120276; &#120380; &#120432; &#7424; &Afr; &#120172; &Ascr; &#120016; &Aopf;). Интерфейс схож с предыдущим пнуктом, но сама фича работает чуть-чуть иначе (см. в [подробном описании](#Вариации-глифов)).
- Переключение режима ввода между символами Юникода \[`Ă Ǣ`\], HTML-энтити/мнемоники \[`&Abreve; &#482;`\] и LaTeX \[`\u{A} \={\AE}`\] (если LaTeX команды нет — введёт символ Юникода) (`RAlt + RShift + F1`).
- Поиск символов по «тегам». У большинства из символов локальной библиотеки есть два и более тегов, по сути, представляющих из себя варианты названий, которые можно вводить как полностью, так и частично, чтобы получить результат (`прописная буква Еры глаголицы` или `гла еры` → &#11295;&#11274;).
- Внутренние раскладки клавиатуры, позволяющие использовать отличное от QWERTY/ЙЦУКЕН расположение привязок.
  Включает поддержку пользовательских раскладок в JSON‐формате.
- Вспомогательные TELEX/VNI-подобные режимы ввода для [вьетнамского языка](https://ru.wikipedia.org/wiki/Куокнгы) (с щепоткой [джарайского](https://ru.wikipedia.org/wiki/Джарайский_язык)) и для [пиньиня](https://ru.wikipedia.org/wiki/Пиньинь).
- Мини-режимы для ввода надстрочных/подстрочных символов цифрового ряда (`LWin LAlt + ↑/↓`), при этом `CapsLock` зеркалит вводимые символы (при активном надстрочном режиме — активация `CapsLock` заставит вводиться подстрочные, и наоборот).
- Мини-режим для ввода римских цифр (отдельных символов Юникода) (`LWin LAlt RShift + ↑`): &#8544;&#8545;&#8546;&#8547;&#8548;&#8549;&#8550;&#8551;&#8552;&#8553;&#8554;&#8555;…
- Возможность добавлять символы в избранное. Избранный символ будет выделяться в списке символом &#x2605;, а его рецепт (если он есть) будет всегда отображаться в подсказке режима композиции.
- Поддержка модификаций. Возможно добавление, например, собственного «Альтернативного» или TELEX/VNI-подобного режима к уже существующим.
- И другие, менее значимые возможности…

<anchor>Подробнее-об-основных-возможностях</anchor>

## Подробнее об основных возможностях

<anchor>Многослойные-привязки</anchor>

### Многослойные привязки, они же «Быстрые ключи»

Вероятно, самое страшное. Их много, невероятно много, и опытный пианист, безусловно, справится с ними. Если верить `.HotKeysCount()`’у, то их более восьмисот. На каждую клавишу может приходиться до 10–11-ти возможных комбинаций (если не считать комбинации с активным CapsLock за отдельные), но в среднем их около восьми (латинская I в этом чемпион: &#300; &Iuml; &Imacr; &Itilde; &Icirc; &#463; &Iogon; &Idot; &Iacute; &Igrave; &#520;).

![Демонстрация](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/fastkeys_demo.gif)

В случае необходимости их можно отключить (или включить) через `RAlt + F1`. Состояние вкл/выкл сохраняется в файле настроек.

Стоит отметить, что инструмент создавался под полноразмерную клавиатуру — со стрелками, нампадом и т.д. Это может вызывать неудобства у пользователей других вариантов клавиатур, однако при необходимости это можно сгладить через пользовательские привязки.

Некоторые комбинации были унаследованы от «Типографской раскладки»:

- `RAlt + Точка (/)` — вводит многоточие \[ … \],
- `RAlt + 1 | 7` — вводят перевёрнутые восклицательный и вопросительный знак \[ &iexcl; &iquest; \],
- `RAlt + 5` — вводит промилле \[ &permil; \],
- `RAlt LAlt + 8` — вводит символ бесконечности \[ &infin; \] (оригинальную комбинацию занял символ умножения \[ &times; \], а потому для бесконечности в неё был добавлен левый Альт),
- `RAlt *(LShift) + Дефисо-минус` — вводят длинное и короткое тире \[ &mdash; &ndash; \],
- `RAlt + Равно` — не равно \[ &ne; \],
- `RAlt + Пробел` — неразрывный пробел \[ <u> </u> \].

Комбинации для вставки кавычек унаследованы ввиде `Б (<)` и `Ю (>)` как и в «Типографской раскладке», но имеют несколько отличное поведение:

- `RAlt + Б (<) | Ю (>)` — вводят \[ « » \], если активен русский язык, или \[ “ ” \], если активен английский,
- `RAlt LAlt + Б (<) | Ю (>)` — тоже, что и предыдущее, но языки поменялись местами,
- `RAlt LShift + Б (<) | Ю (>)` — вводят \[ „ “ \], если активен русский язык, или \[ ‘ ’ \], если активен английский,
- `` RAlt RShift + Ё (`) `` — дополнительная комбинация под \[ ’ \] для использования в качестве апострофа.

Примеры уже собственных привязок:

- `RAlt + Клавиши стрелок` — \[ ←↑↓→ \],
- `RAlt + Пары клавиш стрелок (влево-вверх, вправо-вверх, влево-вниз и т.д.)` — \[ ↖↗↙↘↔↕ \],
- `RAlt LShift + Клавиши стрелок` — \[ ⮌⮍⮏⮎ \],
- `RAlt RShift + Клавиши стрелок влево/вправо` — \[ ↺↻ \],
- `RAlt RShift + Пробел` — круглая шпация \[ <u>&emsp;</u> \],
- `RAlt LShift + Пробел` — полукруглая шпация \[ <u>&ensp;</u> \],
- `RAlt LAlt + Пробел` — тонкая шпация \[ <u>&thinsp; </u> \],
- `RAlt + 9 | 0` — \[ ⟨ ⟩ \],
- `RAlt + [ | ]` — \[ ⁅ ⁆ \],
- `RAlt LAlt LShift RShift + [ | ]` — \[ 《 》 \],
- `RShift *(CapsLock) + 1` — \[ &#8253; &#11800; \].

Комбинации, которые не будут отображены в интерфейсе:

- `Shift + 2, 3, 4, 6, 7` отзеркалены для языков на `RShift`, т.е. при английском `LShift + 2` введёт \[ @ \] (как обычно), а `RShift + 2` — \[ " \], на русском — наоборот.
  - 2 (@"), 3 (#№), 4 ($;), 6 (^:), 7 (&?).
- `RShift *(LShift) + Х, Ъ` введут скобки [] и {} соответственно.

Дополнительно есть «Вторичные» и «Третичные ключи», активируемые через `RAlt LAlt + F1` и `RAlt LAlt + F2` соответственно. Это дополнительные привязки для символов, которые не влезли в основной пул, но им очень хотелось. Они пришли на замену са́мой первой «механике» инструмента — «Группам активации», которая для текущего состояния программы оказалась нерелевантной: необходимо было нажать комбинацию для активации одной из «групп», а затем ввести символьный ключ желаемого знака.

Отключаются эти ключи повторным нажатием их комбинации, а состояние сохраняется в файле настроек.

#### Карты привязок

Здесь будут приведены лишь некоторые из них, так как их очень много — картинок ~28.

Все комбинации можно посмотреть в «Панели», открываемой через контекстное меню иконки в трее или через комбинацию `LWin + LAlt + Home`. В будущем рассматриваю вариант добавить окно с клавиатуроподобным интерфейсом для более дружелюбного отображения привязок.

**Правый Alt**

![Русская раскладка](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/KBLE/img_binds_cyrillic_right_alt.png)

![ПАнглийская раскладка](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/KBLE/img_binds_latin_right_alt.png)

**Правый Alt + Левый Shift**

![Русская раскладка](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/KBLE/img_binds_cyrillic_right_alt_left_shift.png)

![ПАнглийская раскладка](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/KBLE/img_binds_latin_right_alt_left_shift.png)

**Правый + Левый Alt’ы**

![Русская раскладка](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/KBLE/img_binds_cyrillic_left_and_right_alt.png)

![ПАнглийская раскладка](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/KBLE/img_binds_latin_left_and_right_alt.png)

**Левые Ctrl + Alt**

![Русская раскладка](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/KBLE/img_binds_latin_left_ctrl_left_alt.png)

#### Пользовательские привязки

Для создания привязок необходимо разместить `<ФАЙЛ>.JSON` в «`DSLKeyPad\User\profile-<ПРОФИЛЬ>\CustomBindings\`» со схожей структурой:

```json
{
  "info": {
    // Имя пресета
    "name": "Esoteric Binds"
  },
  // Перечень привязок, как для одиночных клавиш
  // так и для привязок с модификаторами
  "binds": {
    "2:LangFlat": ["digit_2::superscript×20", "digit_1::superscript×10"],
    "A": ["alchemical_brimstone", "alchemical_brimstone_philosophers"],
    "<^>!A": "alchemical_brimstone_black",
    "<^>!B": ["astrological_proserpina"],
    ">+A:Caps": ["astrological_neptune", "astrological_uranus"],
    "<^>!И": ["astrological_chiron"],
    "<^>!Y": [
      "@ඞʂ🍋",
      "@Сижу за решёткой в темнице сырой.\nВскормленный в неволе орёл молодой,\nМой грустный товарищ, махая крылом,\nКровавую пищу клюёт под окном,\n\nКлюёт, и бросает, и смотрит в окно,\nКак будто со мною задумал одно.\nЗовёт меня взглядом и криком своим\nИ вымолвить хочет: «Давай, улетим!\n\nМы вольные птицы; пора, брат, пора!\nТуда, где за тучей белеет гора,\nТуда, где синеют морские края,\nТуда, где гуляем лишь ветер… да я!…»"
    ]
  }
}
```

**Примечание:** кодировка файла должна быть UTF-8.

Пользовательские привязки поддерживают следующие форматы:

```json
    // «Плоская» привязка (для всех языков)

    // Не рекомендуется использовать к буквенным клавишам.
    <"МОДИФИКАТОР?КЛЮЧ">: <"ЗНАЧЕНИЕ">
    // Привязка для клавиши конкретного языка
    <"МОДИФИКАТОР?КЛЮЧ">: [<"ЗНАЧЕНИЕ">]
    // То же самое, но разные значения для активного и неактивного CpasLock
    <"МОДИФИКАТОР?КЛЮЧ">: [<"ЗНАЧЕНИЕ">, <"ЗНАЧЕНИЕ">]
    // «Плоский» вариант
    <"МОДИФИКАТОР?КЛЮЧ:Caps">: [<"ЗНАЧЕНИЕ">, <"ЗНАЧЕНИЕ">]
    // Привязка, где первый вариант будет относиться к английской раскладке,
    // а второй к русской

    // Не рекомендуется использовать к буквенным клавишам.
    <"МОДИФИКАТОР?КЛЮЧ:LangFlat">: [<"ЗНАЧЕНИЕ">, <"ЗНАЧЕНИЕ">]
```

И следующие типы значений:

```json
    // Обычный текст
    "@<ТЕКСТ>"
    // Ссылка на запись в библиотеке
    "<ИМЯ ЗАПИСИ>::<ВАРИАНТ>×<КОЛИЧЕСТВО>"
```

Подробнее о формате ссылки на запись см. [ниже](#Формат-ссылки-на-записи).

Модификаторы: `<` и `>` указывают «левый» или «правый», `^`, `!`, `+` — `Ctrl`, `Alt`, `Shift`. Для `RAlt` нужно использовать конструкцию `<^>!`.

После создания пресета его можно будет выбрать в окне настроек либо после перезапуска программы, либо после нажатия кнопки 🔁 рядом с выпадающим списком в окне настроек.

<anchor>Режим-композиции</anchor>

<img src="https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/SVG/Button_Icons/forge.svg" width="64" align="left">

### Режим композиции

Вдохновлён клавишей Compose из Linux и WinCompose. Позволяет преобразовать последовательность одних символов во что-то другое.

Активируется двойным нажатием `RAlt`. Ввод пользователя будет отображаться во всплывающей подсказке вместе с предложениями совпадений и списком рецептов избранных символов.

![Демонстрация](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/compose_demo.webp)

Введение такого режима позволило значительно расширить возможности ввода, т.к. клавиатура не резиновая и не может уместить бесконечное число привязок. Композиция принимает любой ввод, в том числе и от «Быстрых ключей», что даёт большую вариативность для «рецептов».

Режим композиции срабатывает на первое точное совпадение рецепта. Это и плюс и немного минус — такое поведение не позволит ввести, например, `Ǣ`, так как произойдёт автоматические срабатывание `AE` → `Æ`. Для решения этой проблемы я ввела режим удержания (клавиша `Pause`), при котором композиция ждёт нажатия `Enter` или снятия с удержания.

Помимо режима удержания можно воспользоваться «оператором» в виде грависа ( \` ) — его присутствие в строке не отменяет автоматическое срабатывание, однако вместо завершения режима композиции и отправки символа в окно приложения знак будет отправлен в сам режим композиции, где можно будет продолжить ввод, если есть рецепты, начинающиеся с полученного результата. `Ǣ` =  A\`E → Æ → Æ<МАКРОН>.

Общий перечень клавиш:

- `Enter` — подтвердить ввод.
- `Escape` — отменить режим композиции.
- `Backspace` — стереть последний символ.
- `Insert` — вставка содержимого буфера обмена.
- `Pause` — переключение удержания.

#### Операторы

- Гравис ( \` ) — описан выше.
- (ЧИСЛО) — при начале ввода с такого оператора результат рецепта будет продублирован указанное число раз, «(5) TH» → «ÞÞÞÞÞ».
- (\~) — при начале ввода с такого оператора можно вводить целые слова, внутри которых будут обработаны рецепты, «(\~) T<ЗАПЯТАЯ СНИЗУ>ara Roma<ЦИРКУМФЛЕКС>neasca<КРАТКА>» → «Țara Românească».
- (ЧИСЛО~) — объединение предыдущих операторов.
- \#\# — позволяет предотвратить обработку нежелательных последовательностей, «(\~) tho<АКУТ>rr» → «þórr», «(\~) t##ho<АКУТ>rr» → «thórr».

#### Ввод кодовых точек Юникода и Альт-кодов

Дополнительно режим композиции можно использовать для вставки символов по их кодам. Для этого ввод необходимо начать с U+/Ю+ или A+/А+, а далее вводить значение. Можно указывать множество значений, разделяя их пробелом.

На альт-коды влияет язык активной раскладки: числа 128–255 и 0128–0255 используют страницы 850/Windows−1252 для английской раскладки, 866/Windows−1251 для русской, 737/Windows−1253 для греческой, Windows−1258 для вьетнмаской.

Альт-коды можно вводить в шестнадцатеричном формате: `A+0B9` = `A+0185` → № (Windows−1251). Для этого ввод должен содержать букву из диапазона A–F. Верхняя граница — A+FF (A+255).

![Демонстрация альт-кодов](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/compose_mode_altcode_input.png)

![Демонстрация Юникода](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/compose_mode_unicode_input.png)

<img src="https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/SVG/Button_Icons/forge_recipes.svg" width="64" align="left">

#### Пользовательские рецепты

Как «вручную», так и через окно интерфейса возможно создание своих рецептов, которые будут доступны в режиме композиции. В качестве результата можно вводить сколько угодно объёмный многострочный текст, позволяя использовать такие рецепты и не совсем по прямому назначению инструмента — сниппеты кода, фрагменты статей и т.д. Но всё же не рекомендую вставлять туда через чур большой текст.

![Окно «Мои рецепты»](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/user_recipes_panel_ru.png)

![Окно создания и редактирования рецепта](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/user_recipes_editor_ru.png)

При первом запуске создаётся несколько демонстрационных пользовательских рецептов — шаблон HTML, иероглиф «義», тег \<kbd\> и эмодзи «🧊».

Основной файл представлен в JSON‐формате, «`DSLKeyPad\User\profile-<ПРОФИЛЬ>\CustomRecipes.json`». Можно добавлять и дополнительные файлы рецептов в INI (UTF-16 LE) или JSON (UTF-8) форматах, размещая в директории «`DSLKeyPad\User\profile-<ПРОФИЛЬ>\CustomRecipes\`». Рецепты оттуда будут автоматически загружены при старте программы или при нажатии кнопки обновления рецептов в окне «Мои рецепты».

Поддерживается подгрузка последовательностей из файлов формата XCompose. Их небходимо размещать в директории «`DSLKeyPad\User\profile-<ПРОФИЛЬ>\XCompose\`». Файл должен заканчиваться расширением «`.XCompose`»

**Примечание:** поддерживаются только простые последовательности XCompose, как, например, «`<Multi_key> <g> <r> <i> <n> : "😁"`» или «`<Multi_key> <U1100> <U1100> : "ᄁ" U1101 # HANGUL CHOSEONG SSANGKIYEOK`». При первом запуске в демонстрационных целях по указанному пути создаётся файл «demo.XCompose» с последовательностью «`<Multi_key> <0> <0> : "∞"`».

##### Пример дополнительного файла рецептов

**В формате INI:**

```ini
[alchemical_sulfuric_acid]
name=ru:Алх. Серная кислота|en:Alc. Sulfuric Acid
recipe=alc sulf acid
result=🜊🜖
[chemical_sulfuric_acid]
name=ru:Серная кислота|en:Sulfuric Acid
recipe=chem sulf acid|H2SO4
result=H₂SO₄
[emoji_castle]
name=ru:Сиро|en:Shiro
recipe=cls|змк
result=🏯
; [custom_entry_name] — Имя записи, может содержать только «a–Z» и «_» символы
; name — Отображаемое имя в окне пользовательских рецептов. Может быть простой
; строкой, так и быть с указанием локализации для поддерживаемых языков
; recipe — Сам рецепт, может быть простой строкой или содежать несколько рецептов,
; разделяемых «|». Можно использовать ссылки на другие записи как ${имя_записи}
; result — Результат рецепта. Также может содержать ${ссылки}

; то же самое с примером ссылок:
[alchemical_sulfuric_acid]
name=ru:Алх. Серная кислота|en:Alc. Sulfuric Acid
recipe=alc sulf acid
result=${alchemical_acid_vinegar}${alchemical_vitriol_1}
[chemical_sulfuric_acid]
name=ru:Серная кислота|en:Sulfuric Acid
recipe=chem sulf acid|H2SO4
result=H${digit_2::subscript}SO${digit_4::subscript}
```

**В формате JSON:**

```json
[
  "alchemical_sulfuric_acid",
  {
    "name": "ru:Алх. Серная кислота|en:Alc. Sulfuric Acid",
    "recipe": "alc sulf acid",
    // Представление результата в виде массива
    // для удобства вставки и редактирования
    // многострочного значения, например:

    // [
    //    "Первая строка\n",
    //    "Вторая строка\n"
    //    "Третья строка"
    // ]
    "result": ["🜊🜖"]
  },
  "chemical_sulfuric_acid",
  {
    "name": "ru:Серная кислота|en:Sulfuric Acid",
    "recipe": "chem sulf acid|H2SO4",
    "result": ["H₂SO₄"]
  },
  "emoji_castle",
  {
    "name": "ru:Сиро|en:Shiro",
    "recipe": "cls|змк",
    "result": ["🏯"]
  },
  // С ссылками
  "alchemical_sulfuric_acid",
  {
    "name": "ru:Алх. Серная кислота|en:Alc. Sulfuric Acid",
    "recipe": "alc sulf acid",
    "result": ["${alchemical_acid_vinegar}${alchemical_vitriol_1}"]
  },
  "chemical_sulfuric_acid",
  {
    "name": "ru:Серная кислота|en:Sulfuric Acid",
    "recipe": "chem sulf acid|H2SO4",
    "result": ["H${digit_2::subscript}SO${digit_4::subscript}"]
  }
]
```

<anchor>Формат-ссылки-на-записи</anchor>

##### Формат ссылки на записи

\${<ИМЯ ЗАПИСИ>::<ВАРИАНТ>×<КОЛИЧЕСТВО>} — ссылка, которая позволяет обратиться к любому элементу библиотеки, если тот существует. Через «::» можно задать [вариацию](#Вариации-глифов) (\${digit_1} → «1» | \${digit_1::superscript} → «¹»). В конце ссылки через символ «×» можно указать количество повторений вывода записи, на которую мы ссылаемся (\${digit_1::superscript×10} → «¹¹¹¹¹¹¹¹¹¹»).

В одной ссылке возможно указание сразу нескольких записей, помещая названия записей или их частей в `\/` конструкцию, например: `${lat_c_let_\b,o,l,d/::bold}` → 𝐁𝐎𝐋𝐃, `${\hel,lat/_c_let_a_alpha}` → ΑⱭ, `${\nabla,delta,integral,square_root/}` → ∇∆∫√.

Ссылки можно использовать и между пользовательскими рецептами, чтобы создать зависящие друг от друга последовательности, например:

```ini
[white_heart]
name=Белое сердце
recipe=бср|whr
result=🤍
[white_heart_triple]
name=Три белых сердца
recipe=3бср|3whr
result=${white_heart×3} ; вставляет результат первого рецепта трижды
```

Для <Вариантов> существуют альтернативные формы записи для удобства/сокращения:

- Bold — полужирный, п, b
- Italic — курсив, ку, it
- ItalicBold — курсив полужирный, куп, itb
- Modifier — верхний индекс, ви, sup
- Superscript — верхний индекс, ви, sup
- Subscript — нижний индекс, ни, sub
- Fraktur — фрактур, ф, f
- FrakturBold — полужирный фрактур, пф, fb
- Script — рукописный, р, s
- ScriptBold — полужирный рукописный, пр, sb
- DoubleStruck — ds
- SansSerif — без засечек, бз, ss
- SansSerifItalic — курсив без засечек, кубз, ssit
- SansSerifItalicBold — курсив полужирный без засечек, купбз, ssitb
- SansSerifBold — полужирный без засечек, пбз, ssb
- Monospace — моноширинный, м, m
- Fullwidth — полноширинный, пш, fw
- SmallCapital — капитель, к, sc
- SmallCapitalModifier — капитель-модификатор, км, scm
- Small — маленькая, мал, sm
- Combining — комбинируемый, ко, c
- Uncombined — некомбинируемый, неко, uc

Для дополнительных файлов рецептов есть возможность устанавливать несколько параметров для всех содержащихся в них рецептов (указываются вручную в начале файла):

```ini
[options]
; последовательность, устанавливаемая в начало всех рецептов в файле
prefix=<ПЕРФИКС>
; отключает добавление пробела после префикса
no_whitespace=1
; … рецепты
```

```json
[
	"options": {
		"prefix": <"ПЕРФИКС">,
		"no_whitespace": 1
	},
	// … рецепты
]
```

Если в файле есть двойные (и более) рецепты (например «лёд|ice»), для них можно задать и подобного вида префиксы (одинарные рецепты всегда берут первый из префиксов):

```ini
[options]
prefix=эмодзи|emoji
[recipe_name]
name=Лёд
; потребует ввода «эмодзи лёд» или «emoji ice»
recipe=лёд|ice
result=🧊
```

PS. Не рекомендуется использовать больше 1 500 пользовательских рецептов (что очень легко получить с XCompose-файлами). Сейчас такое может ощутимо замедлить инициализацию программы, но возможно у меня получится оптимизировать это лучше в будущем. При тестировании я скачала такой файлик, давший почти 12 000 рецептов и на запуск программы ушло больше минуты, а на открытие «Моих рецептов» — примерно 30–40 сек.

![XCompose рецепты](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/user_recipes_panel_xcompose_ru.png)

<anchor>Альтернативный-ввод</anchor>

### Альтернативный ввод

![Селектор алтернативного ввода](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/scripter_alternative_input_ru.png)

**Комбинация:** `LWin + LAlt + S` (селектор)

В сути своей представляет просто наборы активируемых привязок, что дают доступ к целому перечню форм письменности/алфавитов, в основном отличных от латиницы и кириллицы.

**Примечание:** наборы привязок основываются на клавишах латиницы и кириллицы, т.е. [смена раскладки](#Внутренние-раскладки-клавиатуры) влияет на них. Несовместим с TELEX/VNI-подобным режимом ввода.

Некоторые формы письменности активируются парами — одна письменность работает на латинской раскладке, другая на кириллической. В остальном режимы _одиночны_, работают сразу на нескольких языковых раскладках, но предназначены именно для латинской (в особенности режимы с вводом слогов).

1. **[Эллинское письмо](https://ru.wikipedia.org/wiki/Греческий_алфавит)** (оно же — _греческое_) — позволяет вводить как символы современного греческого алфавита, так и древнегреческие знаки с добавлением прочих различных символов, относящихся к нему, например:<br>αάὰὰἀᾳᾱᾰἅἄἃἂἇἆ ΐ ϐϕϱϖϰϲϵ<br>· ; ⸒ ⸏ ⸐ ⸑ ⸎ ⸔ ⸕ ⸓ ⸖ ʹ ͵ ₯<br><br>От стандартной греческой раскладки отличается типичным для английского расположением небуквенных символов и наличием [коппы](https://ru.wikipedia.org/wiki/Ϟ) и [дигаммы](https://ru.wikipedia.org/wiki/Дигамма) (`Ϟ` `Ϝ`) на месте `Q` `W` (`;` `ς` на греческой раскладке). Здесь знак `ς` вводится комбинацией `LAlt Σ (S)`.<br><br>Положение привязок не изменяется при смене латинской/кириллической раскладки — для Эллинского письма введена собственная раскладка, однако изменить её нельзя (ну, льзя, просто не посчитала нужным добавить пункт выбора в GUI настроек).

2. **[Германские руны](https://ru.wikipedia.org/wiki/Руны)** — позволяет вводить [руны](https://en.wikipedia.org/wiki/Template:Runes) Старшего Футарка, Англосаксонского Футорка, Младшего Футарка, Средневековые руны, «Золотые числа» 17–19 Рунического альманаха (ᛮᛯᛰ), Руны с [Ларца Фрэнкса](https://ru.wikipedia.org/wiki/Ларец_Фрэнкса) и ещё [три руны](https://en.wikipedia.org/wiki/Cirth#Unicode) Толкина за компанию. Ну и значки пунктуации (᛫᛬᛭).

3. **[Глаголица](https://ru.wikipedia.org/wiki/Глаголица)** — основывается на кириллической раскладке и позволяет вводить как простые буквы глаголицы, так и комбинируемые и соответствующую диакритику. Включается в пару с «Германскими рунами».

4. И прочие, уже указанные на скриншоте формы письменности и алфавитов: [Древнетюркское письмо](https://ru.wikipedia.org/wiki/Древнетюркское_письмо), [Древнепермское письмо](https://ru.wikipedia.org/wiki/Древнепермское_письмо) (кириллическая раскладка, в паре с Древнетюркским), [Секейское письмо](https://ru.wikipedia.org/wiki/Секельское_руническое_письмо), [Готское письмо](https://ru.wikipedia.org/wiki/Готское_письмо), [Этрусское письмо](https://ru.wikipedia.org/wiki/Этрусский_язык) (_древнеиталийское_, включает символы не только этрусского алфавита), [Финикийское письмо](https://ru.wikipedia.org/wiki/Финикийское_письмо), [Южноаравийское письмо](https://ru.wikipedia.org/wiki/Южноаравийское_письмо), [Североаравийское письмо](https://en.wikipedia.org/wiki/Ancient_North_Arabian), [Карийское письмо](https://ru.wikipedia.org/wiki/Карийский_язык), [Ликийское письмо](https://en.wikipedia.org/wiki/Lycian_alphabet), [Лидийское письмо](https://en.wikipedia.org/wiki/Lydian_alphabet), [Сидетское письмо](https://en.wikipedia.org/wiki/Sidetic_language) (на данный момент введён режим и записи библиотеки символов, но официально Сидетская письменность будет введена в Юникод с релизом Unicode 17.0 минимум 9-го сентября, потому пока будут квадратики вместо букв и шрифты найти не получиться), [Кипрское слоговое письмо](https://ru.wikipedia.org/wiki/Кипрское_письмо), [Тифинаг](https://ru.wikipedia.org/wiki/Тифинаг), [Угаритское письмо](https://ru.wikipedia.org/wiki/Угаритское_письмо), [Древнеперсидское письмо](https://ru.wikipedia.org/wiki/Древнеперсидская_клинопись), [Международный фонетический алфавит](https://ru.wikipedia.org/wiki/Международный_фонетический_алфавит), [Дезеретский алфавит](https://ru.wikipedia.org/wiki/Дезеретский_алфавит), [Алфавит Шоу](https://ru.wikipedia.org/wiki/Алфавит_Шоу) и режим для ввода математических символов.

Полный охват для каждого режима не гарантирую, но при обнаружении новых или упущенных мной символов — режим будет дополнен.

<anchor>Вариации-глифов</anchor>

### Вариации глифов

![Селектор вариации глифов](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/scripter_glyph_variatioins_ru.png)

**Комбинация:** `LWin + LAlt + A` (селектор)

Имеет такой же интерфейс селектора, как у предыдущей фичи, но вместо набора привязок указывает программе, какой вариант символа нужно использовать. У ряда записей локальной библиотеки есть атрибут, в котором и прописаны соответствующие варианты — полужирный, курсивный, капитель и т.д. То есть такие символы не представлены отдельными записями, являясь лишь свойством. Это делает «Вариации глифов» легко совместимыми с фичами, полагающимися на создание привязок.

Если в записи символа отсутствует указанный вариант — будет послан «обычный» символ.

В главной панели, если запись обладает вариантами, под предпросмотром символа будут отображаться первые восемь из доступных вариантов, а справа от предпросмотра активируется кнопка, открывающая GUI для просмотра всех вариантов (которое так же можно открыть через меню трея → Вариации глифов → Панель вариации глифов):

![GUI промосмотра вариантов](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/panel_glyphs_variations_ru.png)

<anchor>TELEXVNI-подобный-ввод</anchor>

### TELEX/VNI-подобный ввод

Режимы, основанные на вьетнамских [TELEX](<https://en.wikipedia.org/wiki/Telex_(input_method)>) и [VNI](https://en.wikipedia.org/wiki/VNI) раскладках для облегчения ввода, собственно, вьетнамского (с добавлением букв [джарайского алфавита](https://ru.wikipedia.org/wiki/Джарайский_язык)) и [пиньиня](https://ru.wikipedia.org/wiki/Пиньинь). Несовместимы с режимами Альтернативного ввода.

**Комбинации:** `RAlt + F2` (Вьетнамский), `RAlt + RShift + F2` (Пиньинь) / `LWin + LAlt + D` (селектор)

![Демонстрация](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/telex_demo.gif)

Для ввода букв с диакритикой необходимо вводить последовательность символов, например: `AWS` → Ắ (A → Ă → Ắ), `A5` → Ẫ, `DD`→ Đ, `BB` → Ƀ, `UONGW` → ƯƠNG, `UONG5` → ƯỠNG. Для отмены слипания последовательности можно использовать `\`, `A\W` → AW вместо Ă или повторно ввести последний символ (AW → ĂW → AW). Последнюю введённую диакритику можно отменить вводом Z (ǕZ → ÜZ → U).

Можно менять диакритику уже введённого символа, если не перемещать каретку: `ẰS` → Ắ, `ẮA` → Ấ, `ẤJ` → Ậ, `ẬR` → Ẩ…

![Демонстрация](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/telex_switch_demo.gif)

#### Перечень символов режимов

- **Tiếng Việt:** Á À Ả Ã Ạ Â Ấ Ầ Ẩ Ẫ Ậ Ă Ắ Ằ Ẳ Ẵ Ặ É È Ẻ Ẽ Ẹ Ê Ế Ề Ể Ễ Ệ Í Ì Ỉ Ĩ Ị Ó Ò Ỏ Õ Ọ Ô Ố Ồ Ổ Ỗ Ộ Ơ Ớ Ờ Ở Ỡ Ợ Ú Ù Ủ Ũ Ụ Ư Ứ Ừ Ử Ữ Ự Đ
  - **Jơrai:** Ĕ Ě Ĭ Ŏ Ǒ Ö Ŭ Ü Ƀ Č Ñ
- **Hànyǔ Pīnyīn:** Ā Á À Ǎ Ē É È Ě Ī Í Ì Ǐ Ō Ó Ò Ǒ Ū Ú Ù Ǔ Ü Ǖ Ǘ Ǜ Ǚ

#### Нюансы

Работает, не так хорошо, как настоящая вьетнамская языковая раскладка — не учитывает контекст поля ввода и перемещение каретки в нём. Для получения контекста необходимо (если не ошибаюсь) лезть в процесс активного окна, и я решила не рисковать — те же античиты в играх такое не оценят, особенно со стороны автохоткея. Было бы не очень, слови пользователь моей программы бан за такое (или я же сама).

Если по какой-то причине «локальный» контекст (видимый во всплывающей подсказке) не совпадает с контекстом поля ввода — его можно сбросить нажатием `RCtrl`. Так же локальный контекст сбрасывают `Enter`, `Esc`, `Home`, `Page Up/Down`, `Del`, клавиши стрелок, ввод пробельных символов.

Ещё один нюанс — не во всех приложениях оно будет работать как задумано из-за отсутствия механизмов IME. Например, в VS Code попытка ввести Ắ приведёт к разными результатам: ĂẮ, AẮ, Ắ, AĂẮ.

В общем, есть что дорабатывать. Если автохоткей позволит (безопасно) использовать средства IME или нечто подобное — эти режимы ждёт видимое улучшение. Я, конечно, спрашивала нейросети про это, но ни одного маломальски рабочего решения они не предложили.

<anchor>Поиск</anchor>

### Поиск

![Окно ввода для поиска](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/search_ru.png)

**Комбинация:** `LWin + LAlt + F`

Как упоминалось в кратком перечне возможностей — у каждого символа есть набор «тегов», по которым его можно вставить через функцию поиска. Теги могут быть весьма длинными, например «`строчная буква омега с псили, периспомени и ипогеграммени эллиницы`», но вводить тег полностью не обязательно — «`омег пс пе ип`» тоже введёт символ «ᾦ». Однако чем короче запрос, тем менее точный будет результат. Через запятую можно вводить множество запросов:

- «`дез ди, !дез ди, lam, !lam`» → «`𐐔𐐼Λλ`»
- «`ref, obe, psms, msps`» → «`※÷±∓`»

Вместо тега можно ввести имя записи, например «`hel_c_let_l_lambda`» → «`Λ`». Однако какие-либо сокращения для этого недоступны.

Для поиска по тегу доступны простые регулярные выражения, например:

- «`fut.*?\s+\S+al`» (ищем тег с любыми символами и пробелами между fut и al) → «ᚺ» (руна Хагалаз), полный тег: «`germanic rune elder futhark Hagalaz`».
- «`az$`» (ищем тег с az в конце) → «ᛞ» (руна Манназ), полный тег: «`germanic rune elder futhark Mannaz`».
- «`^фра`» (ищем тег с фра в начале) → «₣» (Франк).

Поддерживается и указание вариации глифа, добавляя ::<ВАРИАНТ> в конец запроса:

- «`лигатура ae, лигатура ae::капитель, !латин h::фрактур`» → «`Æᴁ𝔥`»

Помимо непосредственно поиска символов, окно ввода запроса поддерживает вызов некоторых методов/функций:

- `\` или `/Reload` — перезапускает программу.
- `/Exit` — закрывает программу.
- `/ChrLib.Print` — создаёт и открывает файл «`printed_pairs.html`» с перечислением записей локальной библиотеки формата «символ + доступные альтернативные формы — имя записи».
- `/MyRecipes.Update` — ре-инициализирует пользовательские рецепты.
- `/Update.Get` или `/Update.Repair` — получить обновление или восстановить текущую версию.
- `/ChrCrafter.ComposeMode` — аналогично RAlt×2 активирует режим композиции…
- `/KeyboardBinder.Init` — ре-инициализирует раскладки и привязки.

<anchor>Внутренние-раскладки-клавиатуры</anchor>

### Внутренние раскладки клавиатуры

Возможно они могли бы показаться лишними, но они необходимы, так как привязки прибиваются гвоздями к скан-кодам клавиш (что я посчитала более надёжным, чем к «абстракции» в виде буквы/названия клавиши). В следствие этого переключение системной раскладки на, например, Dvorak/Диктор не изменит положение привязок программы. Однако в настройках можно выбрать соответствующие внутренние раскладки и тогда привязки будут на корректных местах для отличных от QWERTY/ЙЦУКЕН раскладок.

Для латиницы доступны следующие раскладки: QWERTY, Colemak, Dvorak. Для кириллицы: ЙЦУКЕН, ЙІУКЕН (1 907), Диктор. Раскладки могут отличаться от своего оригинала.

**Диктор:**

- Для ввода «Ъ» необходимо зажать левый Альт и нажать на «Ь». При этом «Быстрые ключи», назначенные на «Ъ» переходят к «Ь» с добавлением левого Альта в комбинацию (было `RAlt *(LShift) + Ъ` → ҮҰ, стало `RAlt + LAlt *(LShift) + Ь` → ҮҰ).
- Цифровой ряд от ЙЦУКЕН.

**ИІУКЕН:**

\*Добавлена скорее ради забавы.

- Ввод «-\_— –» и «=+≠≈±» перенесён на клавиши «Ъ» и «\» по ЙЦУКЕН.
- Цифровой ряд от ЙЦУКЕН, за исключением «-» и «=».

Если в программе нет подходящей раскладки — её можно создать самому через `<ФАЙЛ>.JSON` разметку в «`DSLKeyPad\User\profile-<ПРОФИЛЬ>\CustomLayouts\`» со следующей структурой:

```json
{
  "info": {
    // название
    "name": "AZERTY",
    // latin если для английского, cyrillic если для русского языка
    "type": "latin"
  },
  // Перечень клавиш
  "keys": {
    // Поддерживает как прямое указание скан-кода
    "A": "SC010",
    "Z": "SC011",
    // …
    // так и имя клавиши на QWERTY/ЙЦУКЕН раскладке
    "E": "E",
    "Q": "A"
  }
}
```

```json
{
  "info": {
    "name": "КВЕРТИ",
    "type": "cyrillic"
  },
  "keys": {
    "К": "Й",
    "В": "Ц",
    // …
    "А": "Ф",
    "С": "Ы",
    "Ф": "А"
  }
}
```

Более полный пример варианта AZERTY раскладки, включающий собственные привязки, активируемые при выборе данной раскладки:

```json
{
  "info": {
    "name": "AZERTY",
    "type": "latin"
  },
  "keys": {
    "A": "SC010",
    "Z": "SC011",
    "E": "E",
    "R": "R",
    "T": "T",
    "Y": "Y",
    "U": "U",
    "I": "I",
    "O": "O",
    "P": "P",
    "CircumflexAccent": "LeftBracket",
    "Dollar": "RightBracket",
    "Q": "A",
    "S": "S",
    "D": "D",
    "F": "F",
    "G": "G",
    "H": "H",
    "J": "J",
    "K": "K",
    "L": "L",
    "M": "Semicolon",
    "SmallUWithGrave": "Apostrophe",
    "Asterisk": "Backslash",
    "W": "Z",
    "X": "X",
    "C": "C",
    "V": "V",
    "B": "B",
    "N": "N",
    "Comma": "M",
    "Semicolon": "Comma",
    "Colon": "Dot",
    "Exclamation": "Slash",
    "Equals": "SC00D"
  },
  "binds": {
    // Список привязок к клавишам
    "Flat": {
      // Префикс [lazy] указывает, что привязка будет включена
      // только при активном «Ремаппинге»
      "[lazy]1": ["[digit_1,lat_s_lig_et]"], // 1&
      "[lazy]2": ["[digit_2,lat_s_let_e__acute]"], // 2é
      "[lazy]3": ["[digit_3,quote]"], // 3"
      "[lazy]4": ["[digit_4,apostrophe]"], // 4'
      "[lazy]5": ["[digit_5,left_parenthesis]"], // 5(
      "[lazy]6": ["[digit_6,hyphen_minus]"], // 6-
      "[lazy]7": ["[digit_7,lat_s_let_e__grave]"], // 7è
      "[lazy]8": ["[digit_8,underscore]"], // 8_
      "[lazy]9": ["[digit_9,lat_s_let_c__cedilla]"], // 9ç
      "[lazy]0": ["[digit_0,lat_s_let_a__acute]"], // 0á
      "[lazy]HyphenMinus": ["[degree,right_parenthesis]"], // °)
      "[lazy]Tilde": ["digit_2::subscript"], // ₂
      "[lazy]CircumflexAccent": ["[diaeresis,circumflex]"], // ◌̈◌̂
      "[lazy]Dollar": ["[wallet_franc,wallet_dollar]"], // ₣$
      "[lazy]SmallUWithGrave": ["[percent,lat_s_let_u__grave]"], // %ù
      "[lazy]Asterisk": ["[hel_s_let_m_mu,asterisk]"], // μ*
      "[lazy]Comma": ["[question,comma]"], // ?,
      "[lazy]Semicolon": ["[dot,semicolon]"], // .;
      "[lazy]Colon": ["[solidus,colon]"], // /:
      "[lazy]Exclamation": ["[section,exclamation]"] // §!
    },
    // Список привязок с модификаторами
    "Moded": {
      "1": {
        "<+": ["[lat_s_lig_et,digit_1]"]
      },
      "2": {
        "<^>!": ["tilde"], // ~
        "<+": ["[lat_s_let_e__acute,digit_2]"]
      },
      "3": {
        "<^>!": ["number_sign"], // #
        "<+": ["[quote,digit_3]"]
      },
      "4": {
        "<^>!": ["left_brace"], // {
        "<+": ["[apostrophe,digit_4]"]
      },
      "5": {
        "<^>!": ["left_bracket"], // [
        "<+": ["[left_parenthesis,digit_5]"]
      },
      "6": {
        "<^>!": ["vertical_line"], // |
        "<+": ["[hyphen_minus,digit_6]"]
      },
      "7": {
        "<^>!": ["grave"], // ◌̀
        "<+": ["[lat_s_let_e__grave,digit_7]"]
      },
      "8": {
        "<^>!": ["reverse_solidus"], // \
        "<+": ["[underscore,digit_8]"]
      },
      "9": {
        "<^>!": ["circumflex_accent"], // ^
        "<+": ["[lat_s_let_c__cedilla,digit_9]"]
      },
      "0": {
        "<^>!": ["commercial_at"], // @
        "<+": ["[lat_s_let_a__acute,digit_0]"]
      },
      "HyphenMinus": {
        "<^>!": ["right_bracket"], // ]
        "<+": ["[right_parenthesis,hyphen_minus]"]
      },
      "E": { "<^>!": ["wallet_eur"] }, // €
      "Dollar": { "<^>!": ["wallet_sign"] }, // ¤
      "Equals": { "<^>!": ["right_brace"], "+": "plus" } // }
    }
  }
}
```

<anchor>Модификации</anchor>

<img src="https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/SVG/Button_Icons/mods.svg" width="64" align="left">

### Модификации

В директории «`DSLKeyPad\Mods\`» можно размещать сторонние AHK-файлы в качестве «модов» к программе.

[\[Образец мода\]](https://github.com/DemerNkardaz/DSL-KeyPad-Custom-Files/tree/master/Mods/Keyboard%20Language%20Switcher)

Для создания мода необходимо создать папку со следующей базовой структурой:

```
Mods/
└── <ИМЯ МОДА>/
    ├── index.ahk
    ├── options.ini
    └── preview.(ico|jpg|png) (необязательный файл)
```

Файл `index.ahk` будет содержать логику мода и к нему можно подключать другие AHK-файлы через `#Include` (ничем не отличается от независимого AHK-скрипта).

Файл `options.ini` (UTF−16 LE) ряд параметров:

```ini
[options]
title=<НАЗВАНИЕ>
version=<ВЕРСИЯ>
type=<ТИП ЗАГРУЗКИ>
author=<АВТОР> ; (опционально добавление @<ССЫЛКА>)
url=<ССЫЛКА НА СТРАНИЦУ МОДА>
description=<ОПИСАНИЕ>
; Локализованные варианты
[ru-RU] ; (или другой код языка)
title=…
author=…
description=…
```

Тип загрузки может быть `pre_init` (для загрузки до основной инициализации) или `post_init` (для загрузки после неё).

Моды автоматически подхватываются. После добавления нового мода следует подождать 5 секунд перед перезапуском программы.

Переключать моды можно черезGUI: Меню трея → Модификации.

PS. если необходимо получить путь до папки вашего мода — он автоматически сохраняются в `mods[«<ИМЯ МОДА>»]`.

PSS. моды — не изолированные друг от скрипты, т.е. возможен конфликт в именах переменных, классов.

![Окно Модификаций](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/mods_menu_ru.png)

<details>

<summary>Более сложный пример мода</summary>

Мод-пример, добавляющий новый режим Альтернативного ввода.

Ссылка: [GitHub](https://github.com/DemerNkardaz/DSL-KeyPad-Custom-Files/tree/master/Mods/Old%20Mongolian%20Sample%20Mod)

Структура:

```
Mods/
└── Old Mongolian Sample Mod/
    ├── Data/
    │   ├── alternative_modes.json
    │   ├── binds.json
    │   ├── characters.json
    │   └── ui_main_panel_lists.json
    ├── Locale/
    │   └── base.(ini или json)
    ├── Resources/
    │   └── old_mongolian.ico
    ├── index.ahk
    ├── options.ini
    └── preview.ico
```

**options.ini**

```ini
[options]
title=Old Mongolian
version=0.0
type=pre_init
description=This is an example of mod
[ru-RU]
title=Старомонгольское письмо
description=Это пример мода
```

**Locale\base.json**

Любые `*.(ini|json)`-файлы в `Locale\` автоматически подтягиваются программой из директорий активных модов. `ini`-файлы должны быть формата `UTF−16 LE`, `json`-файлы — `UTF−8`.

```json
{
  "ru-RU": {
    "mods": {
      "old_mongolian": {
        // Параметр «__self» — собственное имя ключа-объекта,
        // получаемое при ссылке на него, а не на его
        // дочерний ключ

        // Если ввод дочерних элементов не планируются,
        // тогда значение можно указать напрямую
        // «ключ": "значение»
        "__self": "Старомонгольское письмо"
      }
    },
    // Определение названий для селектора Альтернативного ввода
    "script_labels": {
      // Ссылка на другой ключ локализации

      // Может быть комбинацией ключей:
      // {@:script_labels.old_turkic:short<dictionary.et>old_permic}
      // = значение ключей «script_labels.old_turkic.short»,
      // «dictionary.et» и «script_labels.old_permic»

      // Путь до последней точки у ключа до «<» передаётся
      // ключу после «>». Двоеточие — аналог точки для формирования
      // пути, но не передаётся во второй ключ.

      // Результат — «Древнетюркское и Древнепермское письмо»

      // Или {@:key+key2+key3+…} — просто комбинация ключей

      // Может содержать указание языка: {@en-US:key}
      "old_mongolian": "{@:mods.old_mongolian}"
    },
    "generated": {
      // Регистрация префиксов и фрагмента тега для
      // генерации названий и тегов
      "prefix": { "old_mongolian": "Старомонгольск$(ая|ий|ое)" },
      "tag": { "old_mongolian": "старомонгольск$(ая|ий|ое)" }
    },
    "scripts": {
      "old_mongolian": {
        // Перечень имён записей символов с указанием
        // параметра «letter_locale», который берётся для
        // генерации названия, если у записи символа
        // активен параметр <запись>["options"]["useLetterLocale"]

        // Если присвоить значение напрямую или через «__self»,
        // тогда название в интерфейсе будет равно этому значению
        "n_let_a": { "letter_locale": "А" },
        "n_let_e": { "letter_locale": "Э" },
        "n_let_i": { "letter_locale": "И" },
        "n_let_o": { "letter_locale": "О" },
        "n_let_u": { "letter_locale": "У" },
        "n_let_ue": { "letter_locale": "Уэ" }
      }
    }
  },
  "en-US": {
    "mods": {
      "old_mongolian": {
        "__self": "Old Mongolian"
      }
    },
    "script_labels": {
      "old_mongolian": "{@:mods.old_mongolian}"
    },
    "generated": {
      "prefix": { "old_mongolian": "Old Mongolian" },
      "tag": { "old_mongolian": "old mongolian" }
    },
    "scripts": {
      "old_mongolian": {
        "n_let_a": { "letter_locale": "A" },
        "n_let_e": { "letter_locale": "E" },
        "n_let_i": { "letter_locale": "I" },
        "n_let_o": { "letter_locale": "O" },
        "n_let_u": { "letter_locale": "U" },
        "n_let_ue": { "letter_locale": "Ue" }
      }
    }
  }
}
```

**Data\characters.json**

Файл с данными о добавляемых символах.

```json
[
  // Указание названия записи,
  // с помощью [] можно создать запись сразу для
  // множество символов

  // [] может быть сколько угодно, главное,
  // чтобы во всех было одинаковое число элементов,
  // например: lat_[c,s]_let_[a,e]__[acute,grave] =>
  // lat_c_let_a__acute, lat_s_let_e__grave
  "old_mongolian_n_let_[a,e,i,o,u]",
  {
    "unicode": ["1820", "1821", "1822", "1823", "1824"],
    "options": {
      // Указывает текст, отображаемый в GUI для привязки

      // Символ «$» заменится на текст после «let_» и до следующей «_»
      //old_mongolian_n_let_a => $ → A
      "altLayoutKey": "$",
      // Упомянутый выше параметр для указания использования
      // названия символа из локализации для генерации
      // полного названия
      // (необязательный параметр, так как дальше мы регистрируем
      // префикс «old_mongolian» и параметр станет по умолчанию
      // активным)
      "useLetterLocale": true
    }
  },
  "old_mongolian_n_let_ue",
  {
    "unicode": "1826",
    // Указание комбинации «Правый Альт + U»
    "options": { "altLayoutKey": ">! U" }
  }
]
```

**Data\binds.json**

Файл с данными о добавляемых привязках.

```json
{
  // Раздел, хранящий привязки для альтернативных режимов
  "Script Specified": {
    "Old Mongolian": {
      // Обязательный параметр, если добавляется
      // одиночный альтернативный режим
      "ForceSingle": true,
      // Привязки для клавиш без модификаторов
      "Flat": {
        "A": "old_mongolian_n_let_a",
        "E": "old_mongolian_n_let_e",
        "I": "old_mongolian_n_let_i",
        "O": "old_mongolian_n_let_o",
        "U": "old_mongolian_n_let_u"
      },
      // Привязки для клавиш с модификаторами
      "Moded": {
        "U": {
          "<^>!": "old_mongolian_n_let_ue"
        }
      }
    }
  }
}
```

**Data\alternative_modes.json**

Файл с данными о добавляемом альтернативном режиме.

```json
[
  "Old Mongolian",
  {
    // Текст, отображаемый в селекторе под заголовком
    "preview": ["ᠠᠯᠲᠠᠨ ᠵᠤᠯᠠ ᠭᠦᠵᠡᠭᠡᠯᠵᠡᠭᠡᠨ᠎ᠡ"],
    // Шрифт — может быть любой, если он есть в системе
    "fonts": [""],
    // Ключ локализации для заголовка
    "locale": "old_mongolian",
    // Указание названий привязок из “Script Specified” раздела

    // До двух, если создаём режим для пары наборов привязок
    // (латиница и кириллица)
    "bindings": ["Old Mongolian"],
    // Уникальный идентификатор для интерфейса селектора
    "uiid": "OldMongolian",
    // Указание набора иконок — до двух, если создаём
    // режим для пары наборов привязок
    "icons": [
      // Простая строка (например, «gothic») запросит иконку
      // из файла DSLKeyPad\Bin\DSLKeyPad_App_Icons.dll

      // Для использования собственного файла необходимо
      // добавить в начало пути “file::”

      // Все параметры в объекте режима могут содержать «спящий»
      // вызов функции/метода, заключённый в %%, который будет
      // исполнен при регистрации режима

      // В данном примере будет получен путь до файла вида
      // <диск>:\<путь>\DSLKeyPad\Mods\Old Mongolian Sample Mod\Resources\old_mongolian.ico
      "%Format('file::{}\\Resources\\old_mongolian.ico', OldMongolianMod.dir)%"
    ]
  }
]
```

**Data\ui_main_panel_lists.json**

Файл с данными для отображения символов вGUI главной панели.

```json
{
  // Вкладка «Письменности»
  "scripts": {
    // Тип отвечает за правила добавления символов во вкладку

    // Например, если тип равен «Alternative Layout»,
    // а свойство записи ["options"]["altLayoutKey"]
    // пусто — запись не будет добавлена во вкладку
    "type": "Alternative Layout",
    // Группа добавляемых символов (создаётся автоматически
    // после регистрации префикса; может быть указана
    // вручную добавлением параметра «groups»: []
    // в каждую запись символа)

    // Пустая строка создаёт разделитель
    "group": ["", "Old Mongolian"],
    // Указание текста для группы символов

    // Может быть указанием ключа локалищации с @,
    // ссылкой на переменную через %%
    // или простой строкой

    // Рекомендуется указать хотя бы пустым
    "groupKey": { "Old Mongolian": "@mods.old_mongolian" }
  }
}
```

**index.ahk**

```ahk
Class OldMongolianMod {
	static dir := mods["Old Mongolian Sample Mod"]

	static __New() {
		; Загрузка данных
		; о записях символов,
		; о привязках,
		; о режиме Альтернативного ввода и данных
		; для отображения записей символов в GUI главной панели
		local charactersData := JSON.LoadFile(this.dir "\Data\characters.json", "UTF-8")
		local bindsData := JSON.LoadFile(this.dir "\Data\binds.json", "UTF-8")
		local alternativeModeData := JSON.LoadFile(this.dir "\Data\alternative_modes.json", "UTF-8")
		local uiMainGuiData := JSON.LoadFile(this.dir "\Data\ui_main_panel_lists.json", "UTF-8")

		; Регистрация перфикса письменности «old_mongolian» для корректной генерации локализации
		; Регистрация новых символов через событие «по завершении регистрации стандартной библиотеки символов»
		; Опущенный второй аргумент — тип инициализации («Внутренняя библиотека» ("Internal", по умочланию)
		; либо «Пользовательские рецепты» ("Custom"))

		; True на третьем аргументе отключает показ прогресс-бара
		Event.OnEvent("Character Library", "Default Ready", () => (
			ChrLib.AddScript("old_mongolian"),
			ChrReg(charactersData, , True)
		))

		; Регистрация новых привязок через событие инициализации хранилища привязок
		; Регистрация нового режима Альтернативного ввода через событие инициализации хранилища режимов
		Event.OnEvent("Binding Storage", "Initialized", () => BindReg(bindsData))
		Event.OnEvent("Scripter Storage", "Initialized", () => ScripterStore("Alternative Modes", alternativeModeData))
		; Добавление новых записей в GUI главной панели через событие создания экземпляра панели
		; Событие возвращает экземпляр класса
		Event.OnEvent("UI Instance [Panel]", "Created", SetPanelData)

		return

		; Функция добавления новых записей в GUI главной панели, вызываемая событием
		SetPanelData(ClassInstance) {
			; Получение сведений о колонках и добавление новых записей в GUI главной панели
			ClassInstance.GetColumnsData(&columnsData)
			ClassInstance.MergeListViewData(&uiMainGuiData, &columnsData)
			return
		}
	}
}
```

![В меню модов](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/sample_mod_menu_ru.png)

![В селектора Альтернативного ввода](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/sample_mod_selector_ru.png)

![Во вкладке «Письменности»](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/sample_mod_tab_scripts_ru.png)

</details>

<anchor>Главная-панель</anchor>

## Главная панель

![Скриншот окна](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/panel_scripts_tab_ru.png)

Содержит списки записей символов, их рецепты и комбинации ввода. Также имеется вкладка «Помощь» с поясняющей информацией.

<anchor>Окно-настроек</anchor>

## Окно настроек

![Скриншот окна](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/settings_ru.png)

**Комбинация:** `RCtrl F9` (или через контекстное меню иконки в трее).

Здесь можно:

1. Выбрать профиль — в нём хранятся:
   1. Собственно, текущие настройки,
   2. Пользовательские рецепты,
   3. Пользовательские привязки,
   4. Пользовательские раскладки,
   5. Список избранного.
2. Выбрать язык интерфейса,
3. Выбрать раскладки для латиницы, кириллицы и опция ремаппинга (переназначения базовых клавиш).
4. Выбрать пользовательские привязки.
5. Выбрать ресурс Unicode — используется в Панели для открытия веб-страницу символа или дипапазона Unicode.
6. Обновить или восстановить текущую версию и отключить/включить автоматическую проверку обновлений.
7. Выбрать дополнительную комбинацию для ввода пары «İı». По умолчанию для их ввода необходимо зажать четыре модификатора, и потом уже нажать на I/i, однако так как эти символы используются в турецком и гагаузском — была введена настройка для упрощения их ввода. Можно выбрать следующие варианты:
   1. По умолчанию.
   2. Раздельный (заглавная буква I заменяется на İ, а для ввода Iı нужно зажать `LShift`).
   3. Гибридный (для ввода İı нужно зажать `LShift`).
8. Выбрать тип вводимых LaTeX-команд (команды текстового или математического режимов).
9. Выбрать вид HTML-кодов (десятичный \[🜍 → `&#128781;`\] или шестнадцатеричный \[🜍 → `&#x1F70F;`\]).
10. Отключить/включить LaTeX-строки автозамены (см. [ниже](#LaTeX-→-Символ)).
11. Для Международного фонетического алфавита — настройка для выбора символов латиницы вместо греческих (если есть): βχ (греческий) → ꞵꭓ (латиница).
12. Добавление ярлыка в автозагрузку.

Со временем количество настроек будет пополняться.

<anchor>Контекстное-меню-трея</anchor>

## Контекстное меню трея

![Скриншот окна](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/tray_ru.png)

<anchor>Менее-значимые-вспомогательные-возможности</anchor>

## Менее значимые/вспомогательные возможности

### Легенда

Интерфейс с информацией о том или ином символе. На данный момент не самая значимая фича, т.к. я не обладаю достаточными познаниями для полноценного заполнения данных.

![Окно Легенды](https://raw.githubusercontent.com/DemerNkardaz/DSL-KeyPad-Docs/refs/heads/main/Media/legend_ru.png)

### Конвертер температуры

Работает через строки автозамены, требуя вводить в поле ввода запись формата `\tcalc{<ИЗ><В>}`. После срабатывания активируется ввод значения для конвертации, а нажатием любой клавиши, не являющейся цифрой, запятой, точкой или «'» подтверждается вывод конвертированного значения в поле ввода.

Доступны следующие шкалы: Цельсия (C), Фаренгейта (F), Кельвина (K), [Делиля (D)](https://ru.wikipedia.org/wiki/Градус_Делиля), [Лейденская (L)](https://ru.wikipedia.org/wiki/Лейденский_градус), [Ньютона (N)](https://ru.wikipedia.org/wiki/Градус_Ньютона), [Уэджвуда (W)](https://ru.wikipedia.org/wiki/Градус_Уэджвуда) (пересмотренная), [Ранкина (RA)](https://ru.wikipedia.org/wiki/Градус_Ранкина), [Реомюра (RE)](https://ru.wikipedia.org/wiki/Градус_Реомюра), [Рёмера (RO)](https://ru.wikipedia.org/wiki/Градус_Рёмера), [Дальтона (Da)](https://ru.wikipedia.org/wiki/Градус_Дальтона).

При указании дробной части можно выбрать формат вывода (значение дробной части можно опустить — «450,»):

- <Целое>.<Дробное> → 999,727.59 ℃
- <Целое>,<Дробное> → 999 727,59 ℃
- <Целое>.,<Дробное> → 999.727,59 ℃
- <Целое>..<Дробное> → 999 727.59 ℃
- <Целое>'<Дробное> → 999’727.59 ℃
- <Целое>''<Дробное> → 999’727,59 ℃

<anchor>LaTeX-→-Символ</anchor>

### LaTeX → Символ

Строки автозамены формата `$><LaTeX-команда>$`. Если в библиотеке зарегистрирована какая-либо LaTeX-команда, то закреплённый за ней символ можно ввести и таким способом, примеры: `$>\AE$` → Æ, `$>\={\AE}$` → Ǣ, `$>\Omega$` → Ω, `$>\textpertenthousand$` → ‱.

### Строка ↔ URL-кодирование

Комбинации: (выделить текст) → `RCtrl \` (кодировать), `RLCtrls \` (декодировать).

Не своя логика, найдена на [AHK-форуме](https://www.autohotkey.com/boards/viewtopic.php?p=554647&sid=83cf90bcab788e19e2aacfaa0e9e57e3#p554647).

Преобразует строку в URL-кодировку и обратно: `Что-то` ↔ `%D0%A7%D1%82%D0%BE-%D1%82%D0%BE`, `𐌲𐍉𐌸` ↔ `%F0%90%8C%B2%F0%90%8D%89%F0%90%8C%B8`.

### Заключить в кавычки

Комбинация: (выделить текст) →`LAlt 2`

Заключает выделенный текст в кавычки и автоматически заменяет внешние кавычки на внутренние, если они есть: Меч Танаквиль → Меч «Танаквиль» → «Меч „Танаквиль“», Sword Tanaquil → Sword “Tanaquil” → “Sword ‘Tanaquil’”.

Кавычки выбираются в зависимости от активного языка раскладки, работает и для греческого (как для раскладки, так и для Альтернативного режима «Эллинское письмо»): Ξίφος Τανακυλλίς → Ξίφος «Τανακυλλίς» → «Ξίφος “Τανακυλλίς”».

### «Оттипографить»

Комбинация: (выделить текст) → `RAlt F8`

Обрабатывает текст по заданным в `DSLKeyPad\Data\grep_rule_sets.json` правилам, включающих:

1. Удаление двойных пробелов, пробелов в начале и конце строк, перед «правосторонними» знаками препинания и после «левосторонних» (\[« слово »\] → \[«слово»\]).
2. Замена двойных дефисо-минусов на длинное тире.
3. Замена трёх точек на многоточие.
4. Замена \["\*"\] на \[«\*»\] и \[""\*""\] на \[«„\*“»\].
5. Замена «!/?…|?...|...?» на «!..»/«?..».
6. Вынос точки за пределы закрывающей кавычки (.» → ».).
7. Подстановка неразрывного пробела через каждые 3 символа числа (150000000 → 150 000 000).
8. Замена пробела не неразрывный в случаях:
   1. После тире, когда с него начинается предложение (диалог).
   2. До и после тире, если перед пробелом «до» стоит знак препинания (атрибуция).
   3. До тире, если «до» и «после» нет знаков препинания (подлежащее и сказуемое, пр.).
   4. Между числом и символом валюты.
   5. После одиночных букв, союзов, некоторых сокращений и перед «б|бы|ж|же|ли|ль».
   6. В конце абзаца между двумя словами, если посленее из них короче 13-ти символов.
9. Замена пробела на тонкую шпацию в инициалах.
10. Удаление пробела в случаях:
    1. Между числом и символом процента, промиле и базисным пунктом (% ‰ ‱).
11. Замена дефисо-минуса в случаях:
    1. На минус перед числом.
    2. На короткое тире между чисел (включая римские) (диапазон).
    3. Включая короткое тире — на многоточие в диапазонах, начинающихся с отрицательного числа (−70–100 ℃ → −70…100 ℃).

Есть и слегка расширенний вариант на `RAlt F9`, созданный чисто для себя, но:

1. Замена пробела в начале диалога на полукруглую шпацию
2. Добавление круглой шпации в начало абзаца для симуляции абзацного отступа.

**Примечание:** все эти замены работают только при активной русской раскладке. Наборы замен разделяются по языкам, и так как я не знаю об английском типографике вообще ничего — пока не создавала наборы под неё.

### Открыть веб-страницу выделенного символа

Комбинация: (выделить текст) → `LWin + LAlt + PgUp`

Просто открывает страницу выделенного символа на Unicode-ресурсе, выбранном в настройках.

## Из планов на будущее

1. Продолжать улучшать программу, её логику и возможно вводить какие-то новые фичи.
2. Сделать страницу с документацией, включающей и гайд для создания модификаций.
3. Расширить возможности модификаций.
4. Расширение «Легенд», но своими силами вряд ли получится — это требует лингвистических познаний, коими я не обладаю в достаточной мере.
5. Расширение библиотеки символов (пропущенными или по мере их ввода в Юникод). Возможно и расширение режимов альтернативного ввода.
6. Есть мысли перевести интерфейс на веб-рельсы при помощи соответствующей либы и DLL’ки, но это пока имеет низкий приоритет, пусть и результат будет явно симпотичнее, чем с деревянностью местного GUI.

<anchor>Установка-и-репозиторий</anchor>

## Установка и репозиторий

Репозиторий проекта на GitHub: [DSL-KeyPad](https://github.com/DemerNkardaz/DSL-KeyPad)

### Установка:

Во-первых, необходимо установить сам AuotHotkey 2.\*, скачав с [соответствующего сайта](https://www.autohotkey.com/) или через терминал:

```powershell
winget install AutoHotkey.AutoHotkey
```

Затем:

1. Выбрать самую последнюю версию DSL KeyPad из [релизов репозитория](https://github.com/DemerNkardaz/DSL-KeyPad/releases) или скачать с [SourceForge](https://sourceforge.net/projects/dsl-keypad/).
2. Распаковать содержимое архива куда угодно — это и будет директорией установки.
3. Запустить DSLKeyPad.exe или DSLKeyPad.ahk файл.
4. При необходимости в настройках (`RCtrl F9`) можно установить автозагрузку при старте системы.
   1. \*При перемещении папки необходимо будет снова установить автозагрузку, т.к. путь не обновляется автоматически.
5. Потребуется шрифт [Noto Serif](https://fonts.google.com/specimen/Noto+Serif), но при его отсутствии программа сама предложит установку. Для большего охвата символов потребуется ещё больше шрифтов и все они указаны в описании релиза на GitHub (без них в интерфейсе будет больше квадратиков).

<anchor>Ограничения-и-нюансы</anchor>

## Ограничения и нюансы

0. Инструмент всё ещё находится в стадии разработки, но уже может быть полноценно использован.

1. ⚠️ Антиничиты в играх могут триггериться от использования автохоткея, так как немало людей создают на автохоткее разного рода макросы. Перед заходом в любую многопользовательскую игру рекомендую закрывать все процессы автохоткея.

2. Потребляет ~140–180 МБ ОЗУ. По возможности буду пытаться оптимизировать использование памяти. Так, например, раньше вызов главной панели со списками символов потреблял +20 МБ ОЗУ на *каждое* открытие, сейчас же +5 МБ (при _обновлении_ содержимого; происходит, например, при добавлении новых символов).<br>**Примечание:** добавление тысяч новых символов (через пользовательские рецепты или модификации) увеличивает потребление памяти.

3. Автохоткей перехватывает клавиши, следовательно это может приводить к блокировке стандартных привязок приложений. Чтобы избежать этого, можно использовать комбинацию `RAlt F1` для приостановки «Быстрых ключей» (оставляя ряд функций доступными, как, например, Режим композиции), либо `RCtrl F10` для приостановки всех привязок, кроме самой `RCtrl F10`.

4. Программа ограничена работой на английских и русских раскладках. При обнаружении другого языка клавиатуры (например, японский) — все привязки автоматически приостановятся, так как будут мешать этому языку (в примере с японским — невозможность использовать катакану при зажатии `LShift`). При возврате на английский/русский — автоматически восстановятся.<br><br>Помимо «English (США)» и «Русский (Россия)» программа будет работать и на следующих языковых раскладках: Русский — Беларусь, Молдова, Украина, Казахстан, Кыргызстан; Английский — Канада, Великобритания, Ирландия, Австралия, Сингапур, ОАЭ, Новая Зеландия, Белиз, Филлипины, Ямайка, Карибские острова, Южная Африка, Зимбабве, Тринидад и Тобаго. Привязки для английского языка будут работать и на вьетнамской языковой раскладке, и даже относительно совместимы с родным TELEX’ом: `RAlt + A, S` даёт `Ắ`, как при обычном вводе `A, W, S` (но не во всех приложениях).<br><br>Программа будет работать на греческой раскладке, однако при переключении на неё активируется Альтернативный режим «Эллинское письмо» (если ни один из других режимов не активирован). Базовые привязаки рассчитаны лишь на две языковые раскладки и ввод греческого как третьего не планируется — как минимум это потребует изменения привязок клавиш `Q`, `W`, `;` для всех трёх языков (на стандартной греческой раскладке эти клавиши дают `;`, `ς`, `΄`, а при режиме — `Ϟ`, `Ϝ`, `;`), что чревато потерей их функциональности (см. 1-й пункт) (W для перемещения в играх, например) и нуждой пользователя отключать привязки полностью через `RCtrl F10`, если эти клавиши нужны. Альтернативный режим, конечно, приводит к тому же, но только для греческой раскладки. И всё же предпочтительнее использовать режим греческого поверх английского.

5. Не все привязки могут работать на той или иной мембранной клавиатуре. Полноценно проверить работоспособность привязок на механической клавиатуре не удалось (по причине её полурабочего состояния), но она помогла понять, что некоторые привязки не работают из-за основной, мембранной, клавиатуры, а не косяка в коде.

6. Следует быть аккуратнее с комбинациями, включающими `Ctrl` и правый `Shift` — такая комбинация иногда может сменить выравнивание поля ввода на справо налево (с левым `Shift` — на слево направо). Избегать такого поведения мне помогало отжатие сначала `Ctrl`, а замем всего остального. Как такое поведение в принципе заблокировать, не заблокировав базовые `L/RCtrl L/RShift` — пока не знаю.

7. Некоторые приложения могут вести себя неожиданно. Например, MS Word при виде того, что активна английская раскладка, но вводятся вьетнамские буквы может взять и внезапно превратить весь текст в греческий. Решила эту проблему отключением уже не помню какого параметра в ворде, связанного с, собственно, греческим.

8. Не во всех приложениях комбинации будут работать или работать стабильно. Например, в Adobe Illustrator что-то вводит символ, что-то нет, а что-то вводит, но он не появляется, пока не нажмёшь на клавишу стрелки.
